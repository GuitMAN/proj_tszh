<!DOCTYPE html>

<html lang="ru" ng-app="HomeApp">

<head>

    <title>@ViewBag.Title</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="~/Styles/bootstrap-dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Styles/bootstrap-dist/css/bootstrap-theme.min.css" rel="stylesheet" />


</head>

<body>

    <nav class="navbar navbar-default">
        <div class="container" ng-controller="LoginInfoCtrl">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#/">Project name</a>
            </div><!-- /.nav-collapse -->
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    @Html.Action("menu_top", "Nav")
                    
                    <li class="dropdown" ng-show="Session.currentUser">
                        <a href="/#/" class="dropdown-toggle js-activated" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Меню пользователя<span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="#/">Счетчики</a></li>
                            <li><a href="#/feedback">Обратная связь</a></li>
                            <li><a href="#/profile">Профиль</a></li>
                            <li role="separator" class="divider"></li>
                            <li class="dropdown-header">Nav header</li>
                            <li><a href="#">Separated link</a></li>
                            <li><a href="#">One more separated link</a></li>
                        </ul>
                    </li>            
                    <li>
                        <div class="form-group">
                            <div ng-if="Session.currentUser">
                                Welcome, {{ Session.currentUser }}
                                <a class="navbar-brand" href="#/logoout">Выйти</a>
                            </div>
                            <div ng-hide="Session.currentUser">
                                <div ng-controller="LoginCtrl">
                                    <form class="navbar-form navbar-right" name="loginForm" novalidate>
                                        @*@Html.AntiForgeryToken()*@
                                        <div class="form-group">
                                            <input type="text" placeholder="Login" class="form-control" id="username" ng-model="credentials.username">
                                        </div>
                                        <div class="form-group">
                                            <input type="password" placeholder="Password" class="form-control" id="password" ng-model="credentials.password">
                                        </div>
                                        <button type="submit" class="btn btn-xs btn-success" ng-click="login(credentials)">Войти</button>
                                    </form>
                                    <div class="form-group"><a href="#/register" class="dropdown-toggle">Регистрация</a></div>
                                </div>
                            </div>
                        </div>
                     </li>
                 </ul>
             </div><!--/.navbar-collapse -->
        </div><!-- /.container  .LoginCtrl -->
    </nav><!-- /.navbar -->

    <div class="jumbotron">
        <div class="container">
            @if (TempData["message"] != null)
            {
                <div class="alert alert-success">@TempData["message"]</div>
            }
            @RenderBody()
        </div>
    </div>
    <footer>
        Все права защищены. CloudsSolution © 2015.
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="~/Styles/bootstrap-dist/js/bootstrap.js"></script>    
    <script src="~/Styles/bootstrap-dist/js/bootstrap-hover-dropdown.js"></script>
    <script>
    // very simple to use!
    $(document).ready(function() {
      $('.js-activated').dropdownHover().dropdown();
    });
    </script>
    
    
    @RenderSection("Scripts", required: false)


</body>

</html>
